import sys, osimport mathfrom collections import defaultdict, deque, Counterfrom functools import lru_cachefrom bisect import bisect_right, bisect_leftRANDOM = int.from_bytes(os.urandom(8), "big")def getInt(): return int(sys.stdin.readline().strip())def getStr(): return sys.stdin.readline().strip()def getIntSeq(): return map(int, sys.stdin.readline().strip().split())def getStrSeq(): return sys.stdin.readline().strip().split()def getIntList(): return list(map(int, sys.stdin.readline().strip().split()))def getStrList(): return list(sys.stdin.readline().strip().split())  t = 1t = getInt()              def solve():    n, m = getIntList()     d = defaultdict(int)     for i in range(1, n+1):        d[i] = n + 1     for i in range(m):        u, v = getIntList()        d[min(u, v)] = min(d[min(u, v)], max(u, v))     ans = n    for i in range(n-1, 0, -1):        d[i] = min(d[i], d[i+1])    # print(d)    last = -1     for i in range(1, n+1):        rem = d[i] - i         val = (rem*(rem-1)) // 2        dec = 0        if last > i:            temp = last - i            dec = (temp*(temp-1)) // 2                if val > 0:            ans += val - dec        last = d[i]    print(ans)                                                                                                                                                                               for _ in range(t):    solve()